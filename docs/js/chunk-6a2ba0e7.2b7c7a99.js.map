{"version":3,"sources":["webpack:///./src/views/login.vue?a2a4","webpack:///./src/views/login.vue","webpack:///./src/views/login.vue?e0c9","webpack:///./src/views/login.vue?5f4c","webpack:///./src/api/disk.ts"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","key","_hoisted_4","style","_hoisted_5","_hoisted_6","_hoisted_7","render","_ctx","_cache","$props","$setup","$data","$options","_component_base_input","_component_baseButton","isPassword","transform","label","modelValue","email","$event","password","type","onClick","onBlur","isRegister","confirm","register","toLogin","name","components","setup","router","value","then","res","console","log","session","success","localStorage","setItem","push","path","catch","err","error","warning","user","id","__exports__","getDiskList","diskName","storage","from","list","limit","offset","sortBy","column","order","data","message","downLoadFile","download","upLoadFile","file","upload","raw","cacheControl","upsert","addDisk","bucketName","deleteDisk","remove"],"mappings":"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","file":"js/chunk-6a2ba0e7.2b7c7a99.js","sourcesContent":["import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-92c3fda4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"login-container\" }\nconst _hoisted_2 = { class: \"login-control-container\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"hand\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"hand\",\n  style: {\"left\":\"170px\"}\n}\nconst _hoisted_5 = { class: \"arms\" }\nconst _hoisted_6 = { class: \"login-dialog\" }\nconst _hoisted_7 = { style: {\"display\":\"flex\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_base_input = _resolveComponent(\"base-input\")!\n  const _component_baseButton = _resolveComponent(\"baseButton\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (!_ctx.isPassword)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3))\n        : _createCommentVNode(\"\", true),\n      (!_ctx.isPassword)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", {\n          class: \"arm\",\n          style: _normalizeStyle({\n            transform: _ctx.isPassword\n              ? 'translateY(-40px) translateX(40px) scaleX(1)'\n              : '',\n          })\n        }, null, 4),\n        _createElementVNode(\"div\", {\n          class: \"arm arm-right\",\n          style: _normalizeStyle({\n            transform: _ctx.isPassword\n              ? 'translateY(-40px) translateX(-40px) scaleX(-1)'\n              : '',\n          })\n        }, null, 4)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createVNode(_component_base_input, {\n        label: \"邮箱\",\n        modelValue: _ctx.email,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.email) = $event))\n      }, null, 8, [\"modelValue\"]),\n      _createVNode(_component_base_input, {\n        label: \"密码\",\n        modelValue: _ctx.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.password) = $event)),\n        type: \"password\",\n        onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.isPassword = true)),\n        onBlur: _cache[3] || (_cache[3] = ($event: any) => (_ctx.isPassword = false))\n      }, null, 8, [\"modelValue\"]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        (!_ctx.isRegister)\n          ? (_openBlock(), _createBlock(_component_baseButton, {\n              key: 0,\n              type: \"primary\",\n              label: \"注册\",\n              onClick: _ctx.register\n            }, null, 8, [\"onClick\"]))\n          : (_openBlock(), _createBlock(_component_baseButton, {\n              key: 1,\n              type: \"primary\",\n              label: \"提交\",\n              onClick: _ctx.confirm\n            }, null, 8, [\"onClick\"])),\n        (!_ctx.isRegister)\n          ? (_openBlock(), _createBlock(_component_baseButton, {\n              key: 2,\n              type: \"success\",\n              label: \"登录\",\n              onClick: _ctx.toLogin,\n              style: {\"margin-left\":\"15px\"}\n            }, null, 8, [\"onClick\"]))\n          : (_openBlock(), _createBlock(_component_baseButton, {\n              key: 3,\n              type: \"success\",\n              label: \"取消\",\n              onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.isRegister = false)),\n              style: {\"margin-left\":\"15px\"}\n            }))\n      ])\n    ])\n  ]))\n}","\nimport { defineComponent, ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { ElMessage } from \"element-plus\";\nimport { handleLogin, handleRegister } from \"@/api/useAuth\";\nimport { addDisk, getDiskList } from \"@/api/disk\";\nexport default defineComponent({\n  name: \"login\",\n  components: {},\n  setup() {\n    const router = useRouter();\n    const email = ref<string>(\"\"),\n      password = ref<string>(\"\");\n    let isRegister = ref(false);\n    let uuid = \"\";\n    function toLogin() {\n      if (!email.value || !password.value) {\n        ElMessage.warning(\"请填写完整！\");\n        return;\n      }\n      handleLogin({ email: email.value, password: password.value })\n        .then((res: any) => {\n          console.log(res);\n          if (res.session) {\n            ElMessage.success(\"登录成功！\");\n            localStorage.setItem(\"token\", res.session[\"access_token\"]);\n            router.push({ path: \"/home\" });\n          }\n\n          // 用户登录时使用用户的uuid创建文件夹\n        })\n        .catch((err) => {\n          ElMessage.error(\"登录失败！\");\n        });\n    }\n    function confirm(): void {\n      handleRegister({ email: email.value, password: password.value }).then(\n        (res: any) => {\n          console.log(res);\n          let { session, user } = res;\n          ElMessage.success(\"注册成功！\");\n          localStorage.setItem(\"token\", res.session[\"access_token\"]);\n          router.push({ path: \"/home\" });\n          addDisk(user.id);\n        }\n      );\n    }\n    function register() {\n      isRegister.value = true;\n    }\n    let isPassword = ref(false);\n    return {\n      toLogin,\n      isPassword,\n      register,\n      email,\n      password,\n      isRegister,\n      confirm,\n    };\n  },\n});\n","import { render } from \"./login.vue?vue&type=template&id=92c3fda4&scoped=true&ts=true\"\nimport script from \"./login.vue?vue&type=script&lang=ts\"\nexport * from \"./login.vue?vue&type=script&lang=ts\"\n\nimport \"./login.vue?vue&type=style&index=0&id=92c3fda4&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\study\\\\vue-ts\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-92c3fda4\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./login.vue?vue&type=style&index=0&id=92c3fda4&lang=scss&scoped=true\"","import { supabase } from \"@/lib/supabase\";\r\nimport { Session, Provider } from \"@supabase/supabase-js\";\r\n// 登录\r\nasync function getDiskList(diskName?: string) {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(\"vue-ts-update\")\r\n      .list(`${diskName}`, {\r\n        limit: 100,\r\n        offset: 0,\r\n        sortBy: { column: \"name\", order: \"asc\" },\r\n      });\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n    // alert(error.error_description || error);\r\n  }\r\n}\r\n\r\nasync function downLoadFile(path: string) {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(\"vue-ts-update\")\r\n      .download(path);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n    // alert(error.error_description || error);\r\n  }\r\n}\r\n\r\nasync function upLoadFile(path: string, file: any) {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(\"vue-ts-update\")\r\n      .upload(path, file.raw, {\r\n        cacheControl: \"3600\",\r\n        upsert: false,\r\n      });\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n    // alert(error.error_description || error);\r\n  }\r\n}\r\n\r\nasync function addDisk(bucketName: string) {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(\"vue-ts-update\")\r\n      .upload(`${bucketName}/.emptyFolderPlaceHolder`, \"\");\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n    // alert(error.error_description || error);\r\n  }\r\n}\r\n\r\nasync function deleteDisk(diskName: string) {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(\"vue-ts-update\")\r\n      .remove([diskName]);\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n  }\r\n}\r\nasync function addBucket() {\r\n  try {\r\n    const { data, error } = await supabase.storage.createBucket(\"avatars\", {\r\n      public: false,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error thrown:\", error.message);\r\n    // alert(error.error_description || error);\r\n  }\r\n}\r\nexport {\r\n  getDiskList,\r\n  downLoadFile,\r\n  upLoadFile,\r\n  addBucket,\r\n  addDisk,\r\n  deleteDisk,\r\n};\r\n"],"sourceRoot":""}